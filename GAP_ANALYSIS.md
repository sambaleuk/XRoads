# XRoads Gap Analysis â€” Vision vs Current State

## Ta Vision

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           XRoads Workflow IdÃ©al                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    FRICTIONLESS INIT                                 â”‚  â”‚
â”‚  â”‚  - Auto-detect repo                                                  â”‚  â”‚
â”‚  â”‚  - No worktree sheet popup                                           â”‚  â”‚
â”‚  â”‚  - Quick action buttons visible                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      ACTION SELECTION                                â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚   [ğŸ”¨ Implement]  [ğŸ” Review]  [ğŸ§ª Test]  [âœï¸ Write]  [âš™ï¸ Custom]   â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚   Chaque action = Loop spÃ©cialisÃ©e avec skills dÃ©finis              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      AGENT SELECTION                                 â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚   [Claude Code]     [Gemini CLI]     [Codex]                        â”‚  â”‚
â”‚  â”‚   âœ“ All skills      âœ“ Most skills    âœ“ Basic skills                 â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚   Skills chargÃ©s selon action + compatibilitÃ© CLI                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    TERMINAL INTERACTIF                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  > Agent: "Which authentication method?"                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  > Agent: "1. JWT  2. Session  3. OAuth"                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ (User peut rÃ©pondre directement dans le terminal)           â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  [Type your response...                              ] [Send]  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  WORKS IN BOTH:  [Single Mode]  AND  [Agentic Mode (6 slots)]             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ã‰tat Actuel vs Gaps

### GAP 1: No Action Selection âŒ

**Current:**
```swift
// AgentLauncher.swift - Lance un CLI sans action spÃ©cifique
func launchAgent(assignment:, prd:, sessionID:, instructions:, onOutput:)
// â†’ instructions = texte brut gÃ©nÃ©rique
```

**Target:**
```swift
// ActionRunner.swift - Lance une ACTION avec skills
func run(action: ActionType, agent: AgentType, worktree: Worktree, skills: [Skill])
// ActionType = .implement | .review | .test | .write | .custom
```

**Impact:** L'utilisateur ne peut pas choisir "Review mon code" ou "Ã‰cris des tests"

---

### GAP 2: No Interactive Terminal Input âŒ

**Current:**
```swift
// TerminalSlotView.swift - Read-only
private var terminalContent: some View {
    ScrollView {
        ForEach(slot.recentLogs) { log in  // â† OUTPUT ONLY
            MiniLogLine(log: log)
        }
    }
}
// Pas d'InputBar, pas de stdin bridge
```

**Target:**
```swift
// TerminalSlotView.swift - Avec input
VStack {
    terminalOutput  // Logs

    if slot.needsInput {
        TerminalInputBar(onSubmit: { text in
            await processRunner.sendInput(id: slot.processId, text: text)
        })
    }
}
```

**Impact:** Impossible de rÃ©pondre Ã  AskClaudeCode

---

### GAP 3: No Skill Packaging âŒ

**Current:**
```swift
// AGENTFileGenerator.swift - Texte brut
func generate(assignment:, prd:, instructions:) -> String {
    """
    # AGENT BRIEF
    ## Stories
    \(stories)
    ## Coordination
    Use MCP emit_log...
    """
}
// â†’ Pas de skills, pas de prompt templates
```

**Target:**
```swift
// Skill.swift
struct Skill: Codable {
    let id: String           // "commit"
    let name: String         // "Git Commit"
    let promptTemplate: String
    let requiredTools: [String]
    let compatibility: [AgentType]
}

// SkillLoader.swift
func loadSkills(for action: ActionType, agent: AgentType) -> [Skill]
```

**Impact:** Pas de rÃ©utilisation, pas de standardisation

---

### GAP 4: No Cross-CLI Conformity âŒ

**Current:**
```swift
// CLIAdapters.swift - Formatage basique
func formatCommand(_ command: String) -> String {
    command.hasSuffix("\n") ? command : command + "\n"
}
// â†’ MÃªme format pour tous les CLIs
```

**Target:**
```swift
// SkillAdapter.swift
protocol SkillAdapter {
    func adapt(skill: Skill, context: ActionContext) -> String
}

// ClaudeSkillAdapter.swift
struct ClaudeSkillAdapter: SkillAdapter {
    func adapt(skill: Skill, context: ActionContext) -> String {
        // Claude-specific: peut utiliser /skill syntax
        "/\(skill.id) \(context.args)"
    }
}

// GeminiSkillAdapter.swift
struct GeminiSkillAdapter: SkillAdapter {
    func adapt(skill: Skill, context: ActionContext) -> String {
        // Gemini: prompt direct avec instructions
        """
        [SKILL: \(skill.name)]
        \(skill.promptTemplate)
        Context: \(context)
        """
    }
}
```

**Impact:** Un skill Claude ne marche pas sur Gemini

---

### GAP 5: Friction in Worktree Init âŒ

**Current:**
```
User opens app
    â†’ Sees empty dashboard
    â†’ Must click "New Worktree"
    â†’ Modal appears with form
    â†’ Fill branch name, base branch
    â†’ Click Create
    â†’ Then configure slot
    â†’ Then select agent
    â†’ Then start

    = 7+ interactions minimum
```

**Target:**
```
User opens app (in git repo)
    â†’ App auto-detects repo
    â†’ Shows QuickActionBar: [Implement] [Review] [Test]
    â†’ User clicks action
    â†’ Auto-creates worktree with convention name
    â†’ Starts immediately

    = 1-2 interactions
```

---

### GAP 6: Actions not unified Single/Agentic âŒ

**Current:**
```swift
// XRoadsDashboardView.swift - Flows diffÃ©rents
switch dashboardMode {
case .single:
    SingleTerminalLayout(...)  // Flow A
case .agentic:
    TerminalGridLayout(...)    // Flow B
}
// â†’ Configuration et exÃ©cution diffÃ©rentes
```

**Target:**
```swift
// ActionRunner unifiÃ©
actor ActionRunner {
    func run(action: ActionType, slots: [TerminalSlot]) async {
        // MÃªme logique, slots.count = 1 (single) ou N (agentic)
        for slot in slots where slot.isConfigured {
            await executeAction(action, in: slot)
        }
    }
}
```

---

## Mapping: Nexus-Scripts â†’ XRoads Actions

| Nexus Script | XRoads Action | Skills Required |
|--------------|---------------|-----------------|
| `nexus-loop` | `.implement` | prd, code-writer, commit |
| `codex-loop` | `.implement` | prd, code-writer (codex-adapted) |
| `test-writer-loop` | `.test` | test-writer, coverage |
| `test-runner-loop` | `.test` | test-runner |
| N/A (new) | `.review` | code-reviewer, lint |
| N/A (new) | `.write` | doc-generator |

---

## Architecture Cible

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              XRoads v3                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ActionType  â”‚     â”‚ SkillRegistryâ”‚     â”‚     SkillAdapters          â”‚  â”‚
â”‚  â”‚ .implement  â”‚â”€â”€â”€â”€â–¶â”‚ commit       â”‚â”€â”€â”€â”€â–¶â”‚ ClaudeSkillAdapter         â”‚  â”‚
â”‚  â”‚ .review     â”‚     â”‚ review-pr    â”‚     â”‚ GeminiSkillAdapter         â”‚  â”‚
â”‚  â”‚ .test       â”‚     â”‚ prd          â”‚     â”‚ CodexSkillAdapter          â”‚  â”‚
â”‚  â”‚ .write      â”‚     â”‚ test-writer  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ code-reviewerâ”‚                   â”‚                  â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚                  â”‚
â”‚         â”‚                   â”‚                           â–¼                  â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚       ActionRunner         â”‚  â”‚
â”‚                                          â”‚  - Loads skills for action â”‚  â”‚
â”‚                                          â”‚  - Adapts for CLI          â”‚  â”‚
â”‚                                          â”‚  - Generates AGENT.md      â”‚  â”‚
â”‚                                          â”‚  - Launches process        â”‚  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                        â”‚                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                    â”‚                                   â”‚               â”‚  â”‚
â”‚                    â–¼                                   â–¼               â–¼  â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚           â”‚ ProcessRunnerâ”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚TerminalSlot â”‚  â”‚  stdin â”‚ â”‚
â”‚           â”‚   (stdout)   â”‚                  â”‚  (display)   â”‚â”€â”€â”‚ bridge â”‚ â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â–²                     â”‚
â”‚                                                     â”‚                     â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                                          â”‚ TerminalInputBar â”‚            â”‚
â”‚                                          â”‚ (user response)  â”‚            â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## PrioritÃ©s d'ImplÃ©mentation

### Phase 1: CRITICAL (Semaine 1)
1. **US-V3-004** - Interactive Terminal Input
2. **US-V3-013** - ProcessRunner stdin bridge
3. **US-V3-001** - ActionType model

â†’ **Goal:** User peut rÃ©pondre aux questions agent

### Phase 2: HIGH (Semaine 2)
4. **US-V3-002** - Skill model & registry
5. **US-V3-003** - ActionRunner service
6. **US-V3-005** - Action picker UI

â†’ **Goal:** User peut sÃ©lectionner une action

### Phase 3: HIGH (Semaine 3)
7. **US-V3-006** - Cross-CLI skill adapters
8. **US-V3-008** - Built-in skills
9. **US-V3-009** - TerminalSlot extension

â†’ **Goal:** Skills fonctionnent sur Claude/Gemini/Codex

### Phase 4: MEDIUM (Semaine 4)
10. **US-V3-010** - Implement action
11. **US-V3-011** - Review action
12. **US-V3-012** - Test action

â†’ **Goal:** Loops complÃ¨tes disponibles

### Phase 5: POLISH
13. **US-V3-007** - Frictionless UX
14. **US-V3-014** - Unified flow

â†’ **Goal:** Experience fluide < 3 clicks

---

## Fichiers Ã  CrÃ©er

```
XRoads/
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ ActionType.swift          # NEW
â”‚   â””â”€â”€ Skill.swift               # NEW
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ ActionRegistry.swift      # NEW
â”‚   â”œâ”€â”€ ActionRunner.swift        # NEW
â”‚   â”œâ”€â”€ SkillRegistry.swift       # NEW
â”‚   â”œâ”€â”€ SkillLoader.swift         # NEW
â”‚   â””â”€â”€ SkillAdapters/
â”‚       â”œâ”€â”€ SkillAdapter.swift    # NEW
â”‚       â”œâ”€â”€ ClaudeSkillAdapter.swift
â”‚       â”œâ”€â”€ GeminiSkillAdapter.swift
â”‚       â””â”€â”€ CodexSkillAdapter.swift
â”œâ”€â”€ Actions/
â”‚   â”œâ”€â”€ ImplementAction.swift     # NEW
â”‚   â”œâ”€â”€ ReviewAction.swift        # NEW
â”‚   â””â”€â”€ TestAction.swift          # NEW
â”œâ”€â”€ Views/
â”‚   â””â”€â”€ Components/
â”‚       â”œâ”€â”€ TerminalInputBar.swift    # NEW
â”‚       â”œâ”€â”€ ActionPickerMenu.swift    # NEW
â”‚       â””â”€â”€ QuickActionBar.swift      # NEW
â””â”€â”€ Resources/
    â””â”€â”€ Skills/
        â”œâ”€â”€ commit.skill.json     # NEW
        â”œâ”€â”€ review-pr.skill.json
        â”œâ”€â”€ prd.skill.json
        â”œâ”€â”€ test-writer.skill.json
        â””â”€â”€ code-reviewer.skill.json
```

---

## Conclusion

**6 gaps majeurs identifiÃ©s:**
1. âŒ No Action Selection â†’ ActionType + ActionRunner
2. âŒ No Interactive Input â†’ TerminalInputBar + stdin bridge
3. âŒ No Skill Packaging â†’ Skill model + SkillRegistry
4. âŒ No CLI Conformity â†’ SkillAdapters (x3)
5. âŒ Worktree Friction â†’ QuickActionBar + auto-detect
6. âŒ Split Single/Agentic â†’ Unified ActionRunner

**Estimation:** 14 user stories, ~67 points de complexitÃ©
